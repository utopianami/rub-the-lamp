# AI-LINK 세팅 가이드

이 파일을 Claude에게 보여주고 "이거 읽고 세팅 도와줘"라고 하세요.

---

## 사용 목적

### 1. 확증 편향 방지 (Self-Bias Prevention)

- 자기가 만든 답의 오류를 스스로 찾지 못하는 문제 해결
- 동일 모델은 동일한 blind spot을 공유하므로, 독립된 '제3자의 시선' 확보 필요
- Self-consistency ≠ Correctness: 논리적으로 일관되지만 틀린 결과를 통과시키는 위험 방지

### 2. 교차 검증 (Cross-Check)

- 서로 다른 모델의 강점을 활용하여 상호 보완
- 다른 추론 경로로 edge case 탐색 → Adversarial 관점 확보

---

## 전체 그림

```
┌─────────────────────────────────────────────────────────────┐
│                    초기 세팅 (1회)                           │
│                                                             │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────────┐  │
│  │  CLAUDE.md   │  │ .cursorrules │  │   AI-LINK.md     │  │
│  │ (Claude 지침) │  │(Cursor 지침) │  │  (공유 상태 x5)   │  │
│  └──────────────┘  └──────────────┘  └──────────────────┘  │
└─────────────────────────────────────────────────────────────┘
                              ↓
                        세팅 완료!
                              ↓
┌─────────────────────────────────────────────────────────────┐
│              협업 사이클 (반복)                               │
│                                                             │
│    ┌─────────────┐         ┌─────────────┐                 │
│    │   Claude    │ ──────→ │   Cursor    │                 │
│    │  코드 작성   │         │  리뷰/테스트 │                 │
│    └─────────────┘         └─────────────┘                 │
│           ↑                       │                        │
│           │      [bad/neutral]    │                        │
│           └───────────────────────┘                        │
│                                                             │
│                    모두 [good]                              │
│                        ↓                                   │
│                     완료! ✅                                │
└─────────────────────────────────────────────────────────────┘
```

---

## 사용법

### 1. Claude에게 코딩 요청

```
"이거 구현해줘: [기능 설명]"
```

Claude가 빈 슬롯(대기중/완료) 찾아서 코드 작성 후 "리뷰중 (Cursor)"로 업데이트합니다.

### 2. Cursor에게 리뷰 요청

```
"AI-LINK.md 확인하고 리뷰해줘"
```

또는 간단히:

```
"리뷰 시작"
```

### 3. 피드백 반영 (필요시)

Cursor가 [bad] 또는 [neutral] 남기면:

```
"AI-LINK.md 확인하고 피드백 반영해줘"
```

또는 간단히:

```
"피드백 처리해줘"
```

### 4. 완료

Cursor가 모든 항목 [good] 처리 → "완료" 상태로 변경 → 해당 슬롯은 다음 작업 시 재사용됨

---

## Init (Claude 실행 지침)

아래 순서대로 파일들을 생성하세요.

### Step 1: CLAUDE.md 생성

프로젝트 루트에 `CLAUDE.md` 파일 생성:

```markdown
# ⚠️ 필수 규칙 - 절대 무시 금지

**코드 작성 후 AI-LINK.md 업데이트는 선택이 아니라 필수다.**
**이 규칙을 어기면 안 된다. 예외 없음.**

---

## 왜 이 프로토콜을 따르는가?

### 1. 확증 편향 방지 (Self-Bias Prevention)
- 자기가 만든 답의 오류를 스스로 찾지 못하는 문제 해결
- 동일 모델은 동일한 blind spot을 공유하므로, 독립된 '제3자의 시선' 확보 필요
- Self-consistency ≠ Correctness: 논리적으로 일관되지만 틀린 결과를 통과시키는 위험 방지

### 2. 교차 검증 (Cross-Check)
- 서로 다른 모델의 강점을 활용하여 상호 보완
- 다른 추론 경로로 edge case 탐색 → Adversarial 관점 확보

**너(Claude)는 코딩 역할, 리뷰어(다른 모델)는 검증 역할이다.**

---

## AI-LINK 프로토콜 (코딩 역할)

### 기본 원칙
- OpenAI 스타일 코딩: 명확한 함수명, 타입힌트, docstring, 모듈화
- **코드 작성 후 무조건 AI-LINK.md 업데이트 (절대 빠뜨리지 말 것)**

### 슬롯 규칙
- AI-LINK.md에는 5개의 슬롯(SLOT 1~5)이 있음
- 새 작업 시: `[x] 대기중` 또는 `[x] 완료` 상태인 슬롯 중 가장 위에 있는 것 사용
- 5개 모두 진행중이면: 사용자에게 "슬롯 없음" 알림
- **다른 슬롯은 절대 건드리지 말 것**

### 작업 시작 시
1. AI-LINK.md 확인 → 사용 가능한 슬롯 선택
2. 해당 슬롯의 "현재 상태"를 `[x] 작업중 (Claude)`로 변경
3. "작업명"에 간단한 식별자 기록 (예: "로그인 기능", "API 연동")
4. 기존 내용 초기화 (이전 작업 내용 삭제)

### 코드 작성 후
1. "작업 목적" 섹션에 이번 작업 목표 기술
2. "코드 변경 내역" 테이블에 각 파일 추가
   - 상태: `[ ]` (리뷰 대기)
   - 파일 경로: 전체 경로
   - 설명: 한 줄로 해당 파일의 역할
3. "테스트/리뷰 참고 정보"에 리뷰어가 알아야 할 컨텍스트 기록
4. "현재 상태"를 `[x] 리뷰중 (Cursor)`로 변경

### 피드백 반영 시

#### 슬롯 식별 방법
1. **같은 세션**: 이전에 작업한 task id 기억 → 해당 슬롯 처리
2. **새 세션**: 사용자가 작업명 또는 슬롯 번호 명시 필요
   - "로그인 기능 피드백 처리해줘"
   - "SLOT 2 피드백 처리해줘"
3. **명시 안 하면**: 사용자에게 어떤 작업인지 확인 요청

#### 처리 순서
1. `[x] 작업중 (Claude)` 상태인 슬롯의 "개선 요청사항" 확인
2. 수정 완료 후 해당 파일 상태 다시 `[ ]`로 리셋
3. "현재 상태"를 `[x] 리뷰중 (Cursor)`로 변경

### 완료 조건
- 리뷰어가 모든 항목 `[good]` 처리하면 작업 종료
- "현재 상태"가 `[x] 완료`로 변경되면 해당 슬롯은 다음 작업에 재사용 가능
```

### Step 2: .cursorrules 생성

프로젝트 루트에 `.cursorrules` 파일 생성:

```markdown
## 왜 이 프로토콜을 따르는가?

### 1. 확증 편향 방지 (Self-Bias Prevention)
- 자기가 만든 답의 오류를 스스로 찾지 못하는 문제 해결
- 동일 모델은 동일한 blind spot을 공유하므로, 독립된 '제3자의 시선' 확보 필요
- Self-consistency ≠ Correctness: 논리적으로 일관되지만 틀린 결과를 통과시키는 위험 방지

### 2. 교차 검증 (Cross-Check)
- 서로 다른 모델의 강점을 활용하여 상호 보완
- 다른 추론 경로로 edge case 탐색 → Adversarial 관점 확보

**너는 리뷰/검증 역할, 코더(다른 모델)는 구현 역할이다.**

---

## AI-LINK 프로토콜 (리뷰/테스트 역할)

### 기본 원칙
- 코드 품질, 버그, 엣지케이스 중심 리뷰
- 실제 테스트 실행 후 결과 기반 평가
- **코더의 blind spot을 찾는 것이 너의 핵심 역할**

### 슬롯 규칙
- AI-LINK.md에는 5개의 슬롯(SLOT 1~5)이 있음
- `[x] 리뷰중 (Cursor)` 상태인 슬롯만 리뷰 대상
- **다른 상태의 슬롯은 절대 건드리지 말 것**

### 작업 트리거
- AI-LINK.md의 "현재 상태"가 `[x] 리뷰중 (Cursor)`일 때 작업 시작

### 리뷰 프로세스
1. "코드 변경 내역"의 각 파일 확인
2. "테스트/리뷰 참고 정보" 읽고 컨텍스트 파악
3. 각 파일별로:
   - 코드 리뷰 수행
   - 가능하면 테스트 실행
   - 평가 결정

### 평가 기준
- `[good]`: 문제 없음, 프로덕션 가능
- `[neutral]`: 동작하나 개선 여지 있음 (선택적 수정)
- `[bad]`: 버그, 심각한 문제, 반드시 수정 필요

### 리뷰 작성
1. "코드 변경 내역" 테이블의 상태 업데이트
   - `[ ]` → `[good]`, `[neutral]`, 또는 `[bad]`
2. "리뷰 결과 > 피드백" 테이블 작성
3. `[neutral]` 또는 `[bad]` 있으면 "개선 요청사항"에 구체적으로 기술
4. "현재 상태" 변경:
   - 수정 필요시: `[x] 작업중 (Claude)`
   - 모두 good: `[x] 완료`
```

### Step 3: AI-LINK.md 생성

프로젝트 루트에 `AI-LINK.md` 파일 생성:

```markdown
# AI-LINK

> **규칙**: 각 모델은 자신의 차례인 슬롯만 수정한다.
> - Claude: `[x] 대기중`, `[x] 완료`, `[x] 작업중 (Claude)` 상태의 슬롯
> - Cursor: `[x] 리뷰중 (Cursor)` 상태의 슬롯

---

## SLOT 1

### 📌 현재 상태
- [x] 대기중
- [ ] 작업중 (Claude)
- [ ] 리뷰중 (Cursor)
- [ ] 완료

### 🏷️ 작업명
>

### 🎯 작업 목적
>

### 📝 코드 변경 내역

| 상태 | 파일 경로 | 설명 |
|------|----------|------|

### 🔍 테스트/리뷰 참고 정보
>

### 💬 리뷰 결과

#### 피드백
| 파일 | 평가 | 코멘트 |
|------|------|--------|

#### 개선 요청사항
>

---

## SLOT 2

### 📌 현재 상태
- [x] 대기중
- [ ] 작업중 (Claude)
- [ ] 리뷰중 (Cursor)
- [ ] 완료

### 🏷️ 작업명
>

### 🎯 작업 목적
>

### 📝 코드 변경 내역

| 상태 | 파일 경로 | 설명 |
|------|----------|------|

### 🔍 테스트/리뷰 참고 정보
>

### 💬 리뷰 결과

#### 피드백
| 파일 | 평가 | 코멘트 |
|------|------|--------|

#### 개선 요청사항
>

---

## SLOT 3

### 📌 현재 상태
- [x] 대기중
- [ ] 작업중 (Claude)
- [ ] 리뷰중 (Cursor)
- [ ] 완료

### 🏷️ 작업명
>

### 🎯 작업 목적
>

### 📝 코드 변경 내역

| 상태 | 파일 경로 | 설명 |
|------|----------|------|

### 🔍 테스트/리뷰 참고 정보
>

### 💬 리뷰 결과

#### 피드백
| 파일 | 평가 | 코멘트 |
|------|------|--------|

#### 개선 요청사항
>

---

## SLOT 4

### 📌 현재 상태
- [x] 대기중
- [ ] 작업중 (Claude)
- [ ] 리뷰중 (Cursor)
- [ ] 완료

### 🏷️ 작업명
>

### 🎯 작업 목적
>

### 📝 코드 변경 내역

| 상태 | 파일 경로 | 설명 |
|------|----------|------|

### 🔍 테스트/리뷰 참고 정보
>

### 💬 리뷰 결과

#### 피드백
| 파일 | 평가 | 코멘트 |
|------|------|--------|

#### 개선 요청사항
>

---

## SLOT 5

### 📌 현재 상태
- [x] 대기중
- [ ] 작업중 (Claude)
- [ ] 리뷰중 (Cursor)
- [ ] 완료

### 🏷️ 작업명
>

### 🎯 작업 목적
>

### 📝 코드 변경 내역

| 상태 | 파일 경로 | 설명 |
|------|----------|------|

### 🔍 테스트/리뷰 참고 정보
>

### 💬 리뷰 결과

#### 피드백
| 파일 | 평가 | 코멘트 |
|------|------|--------|

#### 개선 요청사항
>
```

### Step 4: Hook 설정 (선택)

`.claude/settings.json` 파일 생성:

```json
{
  "hooks": {
    "PostToolUse": [
      {
        "matcher": "Write|Edit",
        "hooks": [
          {
            "type": "command",
            "command": "echo '⚠️ AI-LINK.md 업데이트 필수! 코드 수정 후 반드시 AI-LINK.md 슬롯 업데이트하세요.'"
          }
        ]
      }
    ],
    "SessionStart": [
      {
        "hooks": [
          {
            "type": "command",
            "command": "echo '=== AI-LINK Protocol === 모든 코드 작성 후 AI-LINK.md 업데이트 필수. 빈 슬롯(대기중/완료) 찾아서 사용.'"
          }
        ]
      }
    ]
  }
}
```

> **참고**:
> 
> - macOS: `osascript -e 'display notification "메시지"'`로 대체

### Step 5: 완료

> "세팅 완료! 이제 Claude에게 코딩을 요청하세요:
> 
> `'이거 구현해줘: [기능 설명]'`"

---

## 협업 사이클 요약

|단계|누구|명령어|하는 일|
|---|---|---|---|
|1|→ Claude|"이거 구현해줘"|빈 슬롯에 코드 작성 + AI-LINK 업데이트|
|2|→ Cursor|"리뷰해줘"|리뷰중 슬롯 코드 리뷰 + 평가|
|3|→ Claude|"피드백 처리해줘"|수정 (필요시)|
|4|반복|-|모두 [good] 될 때까지|

---

## FAQ

**Q: Claude가 AI-LINK.md를 자동으로 업데이트 안 해요** A: CLAUDE.md가 프로젝트 루트에 있는지 확인하세요. 점(.)으로 시작하면 안 됩니다.

**Q: Cursor가 프로토콜을 안 따라요** A: `.cursorrules` 파일이 프로젝트 루트에 있는지 확인하세요.

**Q: 상태 체크박스가 여러 개 체크되어 있어요** A: 항상 하나만 `[x]`로 체크되어야 합니다. 나머지는 `[ ]`로 유지하세요.

**Q: 슬롯이 다 차있어요** A: 완료된 슬롯이 있으면 Claude가 자동으로 재사용합니다. 모두 진행중이면 하나가 완료될 때까지 기다리세요.

**Q: 여러 작업을 동시에 진행할 수 있나요?** A: 네, 최대 5개까지 병렬 진행 가능합니다. 각 슬롯은 독립적입니다.